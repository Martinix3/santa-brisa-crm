(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4371],{2646:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>G});var t=r(95155),i=r(12115),s=r(1978),n=r(60760),l=r(17759),c=r(66695),o=r(50172),d=r(57082),u=r(62177),m=r(90221),x=r(87481),p=r(35695),h=r(51055),j=r(21141),v=r(65331),f=r(51894),g=r(19564),b=r(49889),y=r(34477);let C=(0,y.createServerReference)("7f751070e5a4724cd086a4e362b304ba124c018dae",y.callServer,void 0,y.findSourceMapURL,"addDirectSaleFS");var N=r(68663),w=r(93473);let F=N.Ik({productId:N.Yj().min(1,"Debe seleccionar un producto."),productName:N.Yj(),batchId:N.Yj().min(1,"Debe seleccionar un lote para el producto."),batchNumber:N.Yj().optional(),quantity:N.au.number().min(.001,"La cantidad debe ser mayor que cero."),netUnitPrice:N.au.number().min(.01,"El precio neto debe ser un valor positivo.")}),E=N.Ik({isNewClient:N.zM().default(!1),customerId:N.Yj().optional(),customerName:N.Yj().min(1,"El nombre del cliente es obligatorio."),channel:N.k5(w.iD,{required_error:"El canal de venta es obligatorio."}),issueDate:N.p6({required_error:"La fecha de emisi\xf3n es obligatoria."}),items:N.YO(F).min(1,"Debe a\xf1adir al menos un producto a la venta."),dueDate:N.p6().optional(),invoiceNumber:N.Yj().optional(),status:N.k5(w.tU),relatedPlacementOrders:N.Yj().optional(),notes:N.Yj().optional(),nombreFiscal:N.Yj().optional(),cif:N.Yj().optional(),direccionFiscal_street:N.Yj().optional(),direccionFiscal_number:N.Yj().optional(),direccionFiscal_city:N.Yj().optional(),direccionFiscal_province:N.Yj().optional(),direccionFiscal_postalCode:N.Yj().optional(),direccionFiscal_country:N.Yj().optional().default("Espa\xf1a"),sameAsBilling:N.zM().optional().default(!0),direccionEntrega_street:N.Yj().optional(),direccionEntrega_number:N.Yj().optional(),direccionEntrega_city:N.Yj().optional(),direccionEntrega_province:N.Yj().optional(),direccionEntrega_postalCode:N.Yj().optional(),direccionEntrega_country:N.Yj().optional().default("Espa\xf1a")}).superRefine((e,a)=>{if(e.isNewClient){var r,t,i,s,n,l,c,o,d,u;(null==(r=e.nombreFiscal)?void 0:r.trim())||a.addIssue({path:["nombreFiscal"],message:"Nombre fiscal es obligatorio."}),(null==(t=e.cif)?void 0:t.trim())?/^([A-Z]{1}|[0-9]{1})[0-9]{7}[A-Z0-9]{1}$/i.test(e.cif)||a.addIssue({path:["cif"],message:"Formato de CIF/NIF no v\xe1lido."}):a.addIssue({path:["cif"],message:"CIF es obligatorio."}),(null==(i=e.direccionFiscal_street)?void 0:i.trim())||a.addIssue({path:["direccionFiscal_street"],message:"Calle fiscal es obligatoria."}),(null==(s=e.direccionFiscal_city)?void 0:s.trim())||a.addIssue({path:["direccionFiscal_city"],message:"Ciudad fiscal es obligatoria."}),(null==(n=e.direccionFiscal_province)?void 0:n.trim())||a.addIssue({path:["direccionFiscal_province"],message:"Provincia fiscal es obligatoria."}),(null==(l=e.direccionFiscal_postalCode)?void 0:l.trim())||a.addIssue({path:["direccionFiscal_postalCode"],message:"C\xf3digo postal fiscal es obligatorio."}),!e.sameAsBilling&&((null==(c=e.direccionEntrega_street)?void 0:c.trim())||a.addIssue({path:["direccionEntrega_street"],message:"Calle de entrega es obligatoria."}),(null==(o=e.direccionEntrega_city)?void 0:o.trim())||a.addIssue({path:["direccionEntrega_city"],message:"Ciudad de entrega es obligatoria."}),(null==(d=e.direccionEntrega_province)?void 0:d.trim())||a.addIssue({path:["direccionEntrega_province"],message:"Provincia de entrega es obligatoria."}),(null==(u=e.direccionEntrega_postalCode)?void 0:u.trim())||a.addIssue({path:["direccionEntrega_postalCode"],message:"C\xf3digo postal de entrega es obligatorio."}))}}),_=["Importador","Distribuidor","Cliente Final Directo","Evento Especial","Otro"];var R=r(62523),I=r(30285),k=r(75074),S=r(86950),A=r(34301);let B=e=>{let{searchTerm:a,setSearchTerm:r,filteredAccounts:i,handleClientSelect:s,debouncedSearchTerm:n}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsx)(c.ZB,{children:"Paso 1: \xbfPara qu\xe9 cliente es la venta?"}),(0,t.jsx)(c.BT,{children:"Busca un cliente existente de tipo Importador, Distribuidor o similar, o crea uno nuevo."})]}),(0,t.jsxs)(c.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(k.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,t.jsx)(R.p,{placeholder:"Buscar por nombre o CIF...",value:a,onChange:e=>r(e.target.value),className:"pl-10"})]}),i.length>0&&(0,t.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto p-1",children:i.map(e=>(0,t.jsxs)(I.$,{type:"button",variant:"outline",className:"w-full justify-start",onClick:()=>s(e),children:[" ",(0,t.jsx)(S.A,{className:"mr-2 h-4 w-4 text-muted-foreground"})," ",e.nombre," "]},e.id))}),n&&0===i.length&&(0,t.jsxs)("div",{className:"text-center p-4 border-dashed border-2 rounded-md",children:[(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:['No se encontr\xf3 al cliente "',n,'".']}),(0,t.jsxs)(I.$,{type:"button",className:"mt-2",onClick:()=>s({id:"new",nombre:n}),children:[(0,t.jsx)(A.A,{className:"mr-2 h-4 w-4"})," Continuar como nuevo cliente"]})]})]})]})};var M=r(59409),P=r(12543),L=r(19968);let V=e=>{let{form:a,handleBack:r,handleNextStep:i,client:s}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsx)(c.ZB,{children:"Paso 2: Detalles Principales de la Venta"}),(0,t.jsxs)(c.BT,{children:['Indica el canal y estado para la venta a "',null==s?void 0:s.name,'".']})]}),(0,t.jsxs)(c.Wu,{className:"space-y-6",children:[(0,t.jsx)(l.zB,{control:a.control,name:"channel",render:e=>{let{field:a}=e;return(0,t.jsxs)(l.eI,{children:[(0,t.jsx)(l.lR,{children:"Canal de Venta"}),(0,t.jsxs)(M.l6,{onValueChange:a.onChange,value:a.value,children:[(0,t.jsx)(l.MJ,{children:(0,t.jsx)(M.bq,{children:(0,t.jsx)(M.yv,{placeholder:"Seleccionar canal"})})}),(0,t.jsx)(M.gC,{children:w.iD.map(e=>(0,t.jsx)(M.eb,{value:e,children:e},e))})]}),(0,t.jsx)(l.C5,{})]})}}),(0,t.jsx)(l.zB,{control:a.control,name:"status",render:e=>{let{field:a}=e;return(0,t.jsxs)(l.eI,{children:[(0,t.jsx)(l.lR,{children:"Estado de la Venta"}),(0,t.jsxs)(M.l6,{onValueChange:a.onChange,value:a.value,children:[(0,t.jsx)(l.MJ,{children:(0,t.jsx)(M.bq,{children:(0,t.jsx)(M.yv,{placeholder:"Seleccionar estado"})})}),(0,t.jsx)(M.gC,{children:w.tU.map(e=>(0,t.jsx)(M.eb,{value:e,children:e},e))})]}),(0,t.jsx)(l.C5,{})]})}})]}),(0,t.jsxs)(c.wL,{className:"flex justify-between",children:[(0,t.jsxs)(I.$,{type:"button",variant:"ghost",onClick:r,children:[(0,t.jsx)(P.A,{className:"mr-2 h-4 w-4"})," Volver"]}),(0,t.jsxs)(I.$,{type:"button",onClick:i,children:["Continuar ",(0,t.jsx)(L.A,{className:"ml-2 h-4 w-4"})]})]})]})};var D=r(22346),z=r(77223),T=r(61930);let O=e=>{let{form:a,handleBack:r,handleNextStep:s,subtotal:n,tax:o,totalAmount:d,finishedGoods:m,allBatches:x}=e,{fields:p,append:h,remove:j,update:v}=(0,u.jz)({control:a.control,name:"items"}),f=a.watch("items"),g=i.useMemo(()=>x.reduce((e,a)=>(e[a.inventoryItemId]||(e[a.inventoryItemId]=[]),e[a.inventoryItemId].push(a),e),{}),[x]),b=(e,a)=>{let r=m.find(e=>e.id===a);r&&v(e,{...f[e],productId:r.id,productName:r.name,batchId:"",batchNumber:""})},y=(e,a)=>{var r;let t=null==(r=g[f[e].productId])?void 0:r.find(e=>e.id===a);t&&v(e,{...f[e],batchId:t.id,batchNumber:t.internalBatchCode,netUnitPrice:t.unitCost})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsx)(c.ZB,{children:"Paso 3: Art\xedculos de la Venta"}),(0,t.jsx)(c.BT,{children:"A\xf1ade los productos, selecciona el lote y especifica las cantidades y precios netos (sin IVA) de la venta."})]}),(0,t.jsxs)(c.Wu,{className:"space-y-4",children:[(0,t.jsx)("div",{className:"space-y-3 max-h-72 overflow-y-auto p-1",children:p.map((e,r)=>{var i,s;let n=null==(i=f[r])?void 0:i.productId,c=(g[n]||[]).filter(e=>e.qtyRemaining>0),o=null==(s=f[r])?void 0:s.batchId,d=c.find(e=>e.id===o);return(0,t.jsxs)("div",{className:"flex flex-col gap-2 p-3 border rounded-md bg-secondary/20",children:[(0,t.jsxs)("div",{className:"flex items-end gap-2",children:[(0,t.jsx)(l.zB,{control:a.control,name:"items.".concat(r,".productId"),render:e=>{let{field:a}=e;return(0,t.jsxs)(l.eI,{className:"flex-grow",children:[(0,t.jsx)(l.lR,{className:"text-xs",children:"Producto"}),(0,t.jsxs)(M.l6,{onValueChange:e=>b(r,e),value:a.value,children:[(0,t.jsx)(l.MJ,{children:(0,t.jsx)(M.bq,{children:(0,t.jsx)(M.yv,{placeholder:"Seleccionar producto..."})})}),(0,t.jsx)(M.gC,{children:m.map(e=>(0,t.jsx)(M.eb,{value:e.id,children:e.name},e.id))})]}),(0,t.jsx)(l.C5,{})]})}}),(0,t.jsx)(I.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>j(r),className:"text-destructive hover:bg-destructive/10",children:(0,t.jsx)(z.A,{className:"h-4 w-4"})})]}),n&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[(0,t.jsx)(l.zB,{control:a.control,name:"items.".concat(r,".batchId"),render:e=>{let{field:a}=e;return(0,t.jsxs)(l.eI,{children:[(0,t.jsx)(l.lR,{className:"text-xs",children:"Lote"}),(0,t.jsxs)(M.l6,{onValueChange:e=>y(r,e),value:a.value,children:[(0,t.jsx)(l.MJ,{children:(0,t.jsx)(M.bq,{children:(0,t.jsx)(M.yv,{placeholder:"Seleccionar lote..."})})}),(0,t.jsx)(M.gC,{children:c.map(e=>(0,t.jsxs)(M.eb,{value:e.id,children:[e.internalBatchCode," (Disp: ",e.qtyRemaining,")"]},e.id))})]}),(0,t.jsx)(l.C5,{})]})}}),(0,t.jsx)(l.zB,{control:a.control,name:"items.".concat(r,".quantity"),render:e=>{var a;let{field:r}=e;return(0,t.jsxs)(l.eI,{children:[(0,t.jsx)(l.lR,{className:"text-xs",children:"Cantidad"}),(0,t.jsx)(l.MJ,{children:(0,t.jsx)(R.p,{type:"number",step:"1",max:null==d?void 0:d.qtyRemaining,...r,value:null!=(a=r.value)?a:"",onChange:e=>r.onChange(e.target.value)})}),(0,t.jsx)(l.C5,{})]})}}),(0,t.jsx)(l.zB,{control:a.control,name:"items.".concat(r,".netUnitPrice"),render:e=>{var a;let{field:r}=e;return(0,t.jsxs)(l.eI,{children:[(0,t.jsx)(l.lR,{className:"text-xs",children:"Precio Neto"}),(0,t.jsx)(l.MJ,{children:(0,t.jsx)(R.p,{type:"number",step:"0.01",...r,value:null!=(a=r.value)?a:"",onChange:e=>r.onChange(e.target.value)})}),(0,t.jsx)(l.C5,{})]})}})]})]},e.id)})}),(0,t.jsxs)(I.$,{type:"button",variant:"outline",size:"sm",onClick:()=>h({productId:"",productName:"",batchId:"",quantity:1,netUnitPrice:void 0}),children:[(0,t.jsx)(A.A,{className:"mr-2 h-4 w-4"}),"A\xf1adir Art\xedculo"]}),(0,t.jsx)(D.w,{className:"!my-6"}),(0,t.jsxs)("div",{className:"p-4 bg-muted/50 rounded-md space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Subtotal:"}),(0,t.jsx)(T.A,{value:n,options:{style:"currency",currency:"EUR"}})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"IVA (21%):"}),(0,t.jsx)(T.A,{value:o,options:{style:"currency",currency:"EUR"}})]}),(0,t.jsx)(D.w,{className:"my-1"}),(0,t.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[(0,t.jsx)("span",{className:"text-foreground",children:"TOTAL:"}),(0,t.jsx)(T.A,{value:d,options:{style:"currency",currency:"EUR"}})]})]})]}),(0,t.jsxs)(c.wL,{className:"flex justify-between",children:[(0,t.jsxs)(I.$,{type:"button",variant:"ghost",onClick:r,children:[(0,t.jsx)(P.A,{className:"mr-2 h-4 w-4"})," Volver"]}),(0,t.jsxs)(I.$,{type:"button",onClick:s,children:["Continuar ",(0,t.jsx)(L.A,{className:"ml-2 h-4 w-4"})]})]})]})};var q=r(47262);let U=e=>{let{form:a,client:r,handleBack:i,handleNextStep:s}=e,n=a.watch("sameAsBilling");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{children:['Paso 4: Datos de Facturaci\xf3n y Entrega para "',null==r?void 0:r.nombre,'"']}),(0,t.jsx)(c.BT,{children:"Completa la informaci\xf3n para la nueva cuenta. Los campos con * son obligatorios."})]}),(0,t.jsxs)(c.Wu,{className:"space-y-4",children:[(0,t.jsx)(D.w,{}),(0,t.jsx)("h3",{className:"font-semibold text-base mt-2",children:"Datos de Facturaci\xf3n"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(l.zB,{control:a.control,name:"nombreFiscal",render:e=>{var a;let{field:r}=e;return(0,t.jsxs)(l.eI,{children:[(0,t.jsx)(l.lR,{children:"Nombre Fiscal *"}),(0,t.jsx)(l.MJ,{children:(0,t.jsx)(R.p,{...r,value:null!=(a=r.value)?a:""})}),(0,t.jsx)(l.C5,{})]})}}),(0,t.jsx)(l.zB,{control:a.control,name:"cif",render:e=>{var a;let{field:r}=e;return(0,t.jsxs)(l.eI,{children:[(0,t.jsx)(l.lR,{children:"CIF *"}),(0,t.jsx)(l.MJ,{children:(0,t.jsx)(R.p,{...r,value:null!=(a=r.value)?a:""})}),(0,t.jsx)(l.C5,{})]})}})]}),(0,t.jsx)(l.zB,{control:a.control,name:"direccionFiscal_street",render:e=>{var a;let{field:r}=e;return(0,t.jsxs)(l.eI,{children:[(0,t.jsx)(l.lR,{children:"Calle Fiscal *"}),(0,t.jsx)(l.MJ,{children:(0,t.jsx)(R.p,{...r,value:null!=(a=r.value)?a:""})}),(0,t.jsx)(l.C5,{})]})}}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[(0,t.jsx)(l.zB,{control:a.control,name:"direccionFiscal_number",render:e=>{var a;let{field:r}=e;return(0,t.jsxs)(l.eI,{children:[(0,t.jsx)(l.lR,{children:"N\xfamero"}),(0,t.jsx)(l.MJ,{children:(0,t.jsx)(R.p,{...r,value:null!=(a=r.value)?a:""})}),(0,t.jsx)(l.C5,{})]})}}),(0,t.jsx)(l.zB,{control:a.control,name:"direccionFiscal_postalCode",render:e=>{var a;let{field:r}=e;return(0,t.jsxs)(l.eI,{children:[(0,t.jsx)(l.lR,{children:"C.P. *"}),(0,t.jsx)(l.MJ,{children:(0,t.jsx)(R.p,{...r,value:null!=(a=r.value)?a:""})}),(0,t.jsx)(l.C5,{})]})}}),(0,t.jsx)(l.zB,{control:a.control,name:"direccionFiscal_city",render:e=>{var a;let{field:r}=e;return(0,t.jsxs)(l.eI,{children:[(0,t.jsx)(l.lR,{children:"Ciudad *"}),(0,t.jsx)(l.MJ,{children:(0,t.jsx)(R.p,{...r,value:null!=(a=r.value)?a:""})}),(0,t.jsx)(l.C5,{})]})}}),(0,t.jsx)(l.zB,{control:a.control,name:"direccionFiscal_province",render:e=>{var a;let{field:r}=e;return(0,t.jsxs)(l.eI,{children:[(0,t.jsx)(l.lR,{children:"Provincia *"}),(0,t.jsxs)(M.l6,{onValueChange:r.onChange,value:null!=(a=r.value)?a:"",children:[(0,t.jsx)(l.MJ,{children:(0,t.jsx)(M.bq,{children:(0,t.jsx)(M.yv,{placeholder:"Seleccionar provincia"})})}),(0,t.jsx)(M.gC,{children:w.tF.map(e=>(0,t.jsx)(M.eb,{value:e,children:e},e))})]}),(0,t.jsx)(l.C5,{})]})}})]}),(0,t.jsx)(D.w,{}),(0,t.jsx)("h3",{className:"font-semibold text-base mt-2",children:"Datos de Entrega"}),(0,t.jsx)(l.zB,{control:a.control,name:"sameAsBilling",render:e=>{let{field:a}=e;return(0,t.jsxs)(l.eI,{className:"flex flex-row items-center space-x-2 space-y-0",children:[(0,t.jsx)(l.MJ,{children:(0,t.jsx)(q.S,{checked:a.value,onCheckedChange:a.onChange})}),(0,t.jsx)(l.lR,{className:"font-normal",children:"La direcci\xf3n de entrega es la misma que la de facturaci\xf3n"})]})}}),!n&&(0,t.jsxs)("div",{className:"space-y-4 pt-2 border-l-2 pl-4 border-primary",children:[(0,t.jsx)(l.zB,{control:a.control,name:"direccionEntrega_street",render:e=>{var a;let{field:r}=e;return(0,t.jsxs)(l.eI,{children:[(0,t.jsx)(l.lR,{children:"Calle Entrega *"}),(0,t.jsx)(l.MJ,{children:(0,t.jsx)(R.p,{...r,value:null!=(a=r.value)?a:""})}),(0,t.jsx)(l.C5,{})]})}}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[(0,t.jsx)(l.zB,{control:a.control,name:"direccionEntrega_number",render:e=>{var a;let{field:r}=e;return(0,t.jsxs)(l.eI,{children:[(0,t.jsx)(l.lR,{children:"N\xfamero"}),(0,t.jsx)(l.MJ,{children:(0,t.jsx)(R.p,{...r,value:null!=(a=r.value)?a:""})}),(0,t.jsx)(l.C5,{})]})}}),(0,t.jsx)(l.zB,{control:a.control,name:"direccionEntrega_postalCode",render:e=>{var a;let{field:r}=e;return(0,t.jsxs)(l.eI,{children:[(0,t.jsx)(l.lR,{children:"C.P. *"}),(0,t.jsx)(l.MJ,{children:(0,t.jsx)(R.p,{...r,value:null!=(a=r.value)?a:""})}),(0,t.jsx)(l.C5,{})]})}}),(0,t.jsx)(l.zB,{control:a.control,name:"direccionEntrega_city",render:e=>{var a;let{field:r}=e;return(0,t.jsxs)(l.eI,{children:[(0,t.jsx)(l.lR,{children:"Ciudad *"}),(0,t.jsx)(l.MJ,{children:(0,t.jsx)(R.p,{...r,value:null!=(a=r.value)?a:""})}),(0,t.jsx)(l.C5,{})]})}}),(0,t.jsx)(l.zB,{control:a.control,name:"direccionEntrega_province",render:e=>{var a;let{field:r}=e;return(0,t.jsxs)(l.eI,{children:[(0,t.jsx)(l.lR,{children:"Provincia *"}),(0,t.jsxs)(M.l6,{onValueChange:r.onChange,value:null!=(a=r.value)?a:"",children:[(0,t.jsx)(l.MJ,{children:(0,t.jsx)(M.bq,{children:(0,t.jsx)(M.yv,{placeholder:"Seleccionar provincia"})})}),(0,t.jsx)(M.gC,{children:w.tF.map(e=>(0,t.jsx)(M.eb,{value:e,children:e},e))})]}),(0,t.jsx)(l.C5,{})]})}})]})]})]}),(0,t.jsxs)(c.wL,{className:"flex justify-between",children:[(0,t.jsxs)(I.$,{type:"button",variant:"ghost",onClick:i,children:[(0,t.jsx)(P.A,{className:"mr-2 h-4 w-4"})," Volver"]}),(0,t.jsxs)(I.$,{type:"button",onClick:s,children:["Continuar ",(0,t.jsx)(L.A,{className:"ml-2 h-4 w-4"})]})]})]})};var Y=r(73672);let J=e=>{if(!e)return"No especificada";let a=[e.street?"".concat(e.street).concat(e.number?", ".concat(e.number):""):null,e.city,e.province,e.postalCode].filter(Boolean);return 0===a.length?"No especificada":a.join(", ")},Z=e=>{let{form:a,client:r,handleBack:i,isSubmitting:s,totalAmount:n}=e,l=a.watch(),d=(null==r?void 0:r.id)==="new",u=d?null:r;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsx)(c.ZB,{children:"Paso Final: Verifica y Confirma la Venta"}),(0,t.jsx)(c.BT,{children:"Comprueba que todos los datos son correctos. Puedes volver atr\xe1s para editar si es necesario."})]}),(0,t.jsxs)(c.Wu,{className:"space-y-6",children:[(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsx)(c.ZB,{className:"text-lg",children:"Resumen de la Venta"})}),(0,t.jsxs)(c.Wu,{className:"space-y-2 text-sm",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Cliente:"})," ",null==r?void 0:r.nombre," ",d&&(0,t.jsx)("span",{className:"text-primary font-bold",children:"(Nuevo)"})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Canal de Venta:"})," ",(0,t.jsx)("span",{className:"font-semibold",children:l.channel||"N/D"})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Estado:"})," ",(0,t.jsx)("span",{className:"font-semibold",children:l.status})]}),(0,t.jsxs)("div",{className:"pt-2",children:[(0,t.jsx)("h4",{className:"font-semibold",children:"Art\xedculos:"}),(0,t.jsx)("ul",{className:"list-disc pl-5 mt-1",children:l.items.map((e,a)=>(0,t.jsxs)("li",{children:[e.productName,": ",e.quantity," x ",(0,t.jsx)(T.A,{value:e.netUnitPrice,options:{style:"currency",currency:"EUR"}})]},a))})]}),(0,t.jsxs)("p",{className:"font-bold pt-2",children:[(0,t.jsx)("strong",{children:"Total (IVA incl.):"})," ",(0,t.jsx)(T.A,{value:n,options:{style:"currency",currency:"EUR"}})]}),l.notes&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Notas:"})," ",l.notes]})]})]}),d&&(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsx)(c.ZB,{className:"text-lg",children:"Datos de la Nueva Cuenta"})}),(0,t.jsxs)(c.Wu,{className:"space-y-2 text-sm",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Nombre Fiscal:"})," ",l.nombreFiscal]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"CIF:"})," ",l.cif]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Direcci\xf3n Fiscal:"})," ","".concat(l.direccionFiscal_street||"",", ").concat(l.direccionFiscal_city||"")]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Direcci\xf3n Entrega:"})," ",l.sameAsBilling?"(Misma que facturaci\xf3n)":"".concat(l.direccionEntrega_street||"",", ").concat(l.direccionEntrega_city||"")]})]})]}),!d&&u&&(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsx)(c.ZB,{className:"text-lg",children:"Datos de Env\xedo y Facturaci\xf3n"})}),(0,t.jsxs)(c.Wu,{className:"space-y-2 text-sm",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Direcci\xf3n de Env\xedo:"})," ",J(u.addressShipping)]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Direcci\xf3n Fiscal:"})," ",J(u.addressBilling)]})]})]})]}),(0,t.jsxs)(c.wL,{className:"flex justify-between",children:[(0,t.jsxs)(I.$,{type:"button",variant:"ghost",onClick:i,disabled:s,children:[(0,t.jsx)(P.A,{className:"mr-2 h-4 w-4"})," Volver"]}),(0,t.jsx)(I.$,{type:"submit",disabled:s,children:s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.A,{className:"mr-2 h-4 w-4 animate-spin"})," Guardando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Y.A,{className:"mr-2 h-4 w-4"})," Confirmar y Guardar"]})})]})]})};function G(){let e=function(){let{toast:e}=(0,x.dj)(),a=(0,p.useRouter)(),{teamMember:r,refreshDataSignature:t}=(0,h.A)(),{allCategories:s,isLoading:n}=(0,j.Ck)(),[l,c]=i.useState("client"),[o,d]=i.useState(null),[y,N]=i.useState(!0),[w,F]=i.useState(!1),[R,I]=i.useState([]),[k,S]=i.useState([]),[A,B]=i.useState([]),[M,P]=i.useState(""),[L,V]=i.useState("");i.useEffect(()=>{let e=setTimeout(()=>{V(M)},300);return()=>{clearTimeout(e)}},[M]);let D=i.useMemo(()=>L?R.filter(e=>e.nombre&&e.nombre.toLowerCase().includes(L.toLowerCase())||e.cif&&e.cif.toLowerCase().includes(L.toLowerCase())):[],[L,R]),z=(0,u.mN)({resolver:(0,m.u)(E),mode:"onBlur",defaultValues:{isNewClient:!1,customerId:"",customerName:"",channel:void 0,issueDate:new Date,items:[{productId:"",productName:"",batchId:"",quantity:1,netUnitPrice:void 0}],status:"Borrador",relatedPlacementOrders:"",notes:"",nombreFiscal:"",cif:"",direccionFiscal_street:"",direccionFiscal_number:"",direccionFiscal_city:"",direccionFiscal_province:"",direccionFiscal_postalCode:"",direccionFiscal_country:"Espa\xf1a",sameAsBilling:!0,direccionEntrega_street:"",direccionEntrega_number:"",direccionEntrega_city:"",direccionEntrega_province:"",direccionEntrega_postalCode:"",direccionEntrega_country:"Espa\xf1a"}}),T=z.watch("sameAsBilling"),O=z.watch("direccionFiscal_street"),q=z.watch("direccionFiscal_number"),U=z.watch("direccionFiscal_city"),Y=z.watch("direccionFiscal_province"),J=z.watch("direccionFiscal_postalCode"),Z=z.watch("direccionFiscal_country");i.useEffect(()=>{T&&(z.setValue("direccionEntrega_street",O),z.setValue("direccionEntrega_number",q),z.setValue("direccionEntrega_city",U),z.setValue("direccionEntrega_province",Y),z.setValue("direccionEntrega_postalCode",J),z.setValue("direccionEntrega_country",Z))},[T,O,q,U,Y,J,Z,z]);let G=z.watch("items"),{subtotal:H,tax:$,totalAmount:W}=i.useMemo(()=>{let e=G.reduce((e,a)=>e+(Number(a.quantity)||0)*(Number(a.netUnitPrice)||0),0),a=.21*e;return{subtotal:e,tax:a,totalAmount:e+a}},[G]);i.useEffect(()=>{async function a(){N(!0);try{let[a,r,t]=await Promise.all([(0,v.U)(),(0,g.y)(),(0,b.Z)()]);if(I(a.filter(e=>_.includes(e.type))),B(t),!n){let a="producto terminado".normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim().toLowerCase(),t=s.find(e=>e.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim().toLowerCase()===a);if(t){let e=r.filter(e=>e.categoryId===t.id);S(e)}else e({title:"Advertencia",description:"No se encontr\xf3 la categor\xeda 'Producto Terminado'. No se podr\xe1n seleccionar productos.",variant:"destructive"})}}catch(a){e({title:"Error",description:"No se pudieron cargar los datos necesarios.",variant:"destructive"})}finally{N(!1)}}n||a()},[e,n,s]);let Q=async()=>{let e=[];switch(l){case"details":e=["channel","status","issueDate"];break;case"items":e=["items"];break;case"address":e=["nombreFiscal","cif","direccionFiscal_street","direccionFiscal_city","direccionFiscal_province","direccionFiscal_postalCode"],z.getValues("sameAsBilling")||e.push("direccionEntrega_street","direccionEntrega_city","direccionEntrega_province","direccionEntrega_postalCode")}if(!(e.length>0)||await z.trigger(e))switch(l){case"details":c("items");break;case"items":z.getValues("isNewClient")?c("address"):c("verify");break;case"address":c("verify")}};return{form:z,step:l,setStep:c,client:o,handleClientSelect:e=>{d(e),z.setValue("isNewClient","new"===e.id),z.setValue("customerName",e.nombre),"new"!==e.id?z.setValue("customerId",e.id):z.setValue("customerId",void 0),c("details")},searchTerm:M,setSearchTerm:P,filteredAccounts:D,debouncedSearchTerm:L,handleBack:()=>{switch(l){case"details":default:c("client");break;case"items":c("details");break;case"address":c("items");break;case"verify":z.getValues("isNewClient")?c("address"):c("items")}},handleNextStep:Q,onSubmit:async i=>{F(!0);try{let s=i.customerId;if(i.isNewClient){let e={name:i.customerName,legalName:i.nombreFiscal,cif:i.cif,type:"Cliente Final Directo",status:"Activo",addressBilling:{street:i.direccionFiscal_street,number:i.direccionFiscal_number,city:i.direccionFiscal_city,province:i.direccionFiscal_province,postalCode:i.direccionFiscal_postalCode,country:i.direccionFiscal_country},addressShipping:i.sameAsBilling?{street:i.direccionFiscal_street,number:i.direccionFiscal_number,city:i.direccionFiscal_city,province:i.direccionFiscal_province,postalCode:i.direccionFiscal_postalCode,country:i.direccionFiscal_country}:{street:i.direccionEntrega_street,number:i.direccionEntrega_number,city:i.direccionEntrega_city,province:i.direccionEntrega_province,postalCode:i.direccionEntrega_postalCode,country:i.direccionEntrega_country},salesRepId:null==r?void 0:r.id};s=await (0,f.i)(e)}let n={...i,customerId:s,issueDate:i.issueDate};await C(n),e({title:"\xa1Venta Registrada!",description:"Se ha guardado la venta para ".concat(i.customerName,".")}),t(),a.push("/direct-sales-sb")}catch(a){e({title:"Error al Guardar",description:"No se pudo guardar la venta: ".concat(a.message),variant:"destructive"})}finally{F(!1)}},isLoading:y,isSubmitting:w,subtotal:H,tax:$,totalAmount:W,finishedGoods:k,allBatches:A}}(),{form:a,step:r,isSubmitting:y,isLoading:N}=e;return N?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-8",children:[(0,t.jsx)(o.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,t.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Cargando datos para el formulario..."})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("header",{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.A,{className:"h-8 w-8 text-primary"}),(0,t.jsx)("h1",{className:"text-3xl font-headline font-semibold",children:"Registrar Nueva Venta Directa"})]}),(0,t.jsx)(l.lV,{...a,children:(0,t.jsx)("form",{onSubmit:a.handleSubmit(e.onSubmit),children:(0,t.jsx)(c.Zp,{className:"max-w-4xl mx-auto shadow-lg mt-6 overflow-hidden",children:(0,t.jsx)(n.N,{mode:"wait",children:(()=>{switch(r){case"client":return(0,t.jsx)(s.P.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},children:(0,t.jsx)(B,{...e})},"client");case"details":return(0,t.jsx)(s.P.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},children:(0,t.jsx)(V,{...e})},"details");case"items":return(0,t.jsx)(s.P.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},children:(0,t.jsx)(O,{...e})},"items");case"address":return(0,t.jsx)(s.P.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},children:(0,t.jsx)(U,{...e})},"address");case"verify":return(0,t.jsx)(s.P.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},children:(0,t.jsx)(Z,{...e})},"verify")}})()})})})})]})}},3030:(e,a,r)=>{Promise.resolve().then(r.bind(r,2646))},19564:(e,a,r)=>{"use strict";r.d(a,{y:()=>i});var t=r(34477);let i=(0,t.createServerReference)("7f1e87e0573a6b4c8c91b413e52b517bc8f151c7f9",t.callServer,void 0,t.findSourceMapURL,"getInventoryItemsFS")},21141:(e,a,r)=>{"use strict";r.d(a,{io:()=>c,Ck:()=>o});var t=r(95155),i=r(12115),s=r(34477);let n=(0,s.createServerReference)("7fee17d10823c0e61c4b4cf19391dbb8d88b0cb0d4",s.callServer,void 0,s.findSourceMapURL,"getCategoriesFS"),l=(0,i.createContext)({allCategories:[],isLoading:!0,categoriesMap:new Map,inventoryCategories:[],costCategories:[]});function c(e){let{children:a,dataSignature:r}=e,[s,c]=(0,i.useState)([]),[o,d]=(0,i.useState)(!0);(0,i.useEffect)(()=>{d(!0),n().then(c).catch(console.error).finally(()=>d(!1))},[r]);let u=(0,i.useMemo)(()=>{let e=new Map(s.map(e=>[e.id,e.name])),a=s.filter(e=>"inventory"===e.kind),r=s.filter(e=>"cost"===e.kind);return{allCategories:s,isLoading:o,categoriesMap:e,inventoryCategories:a,costCategories:r}},[s,o]);return(0,t.jsx)(l.Provider,{value:u,children:a})}function o(){let e=(0,i.useContext)(l);if(void 0===e)throw Error("useCategories must be used within a CategoriesProvider");return e}},22346:(e,a,r)=>{"use strict";r.d(a,{w:()=>l});var t=r(95155),i=r(12115),s=r(87489),n=r(59434);let l=i.forwardRef((e,a)=>{let{className:r,orientation:i="horizontal",decorative:l=!0,...c}=e;return(0,t.jsx)(s.b,{ref:a,decorative:l,orientation:i,className:(0,n.cn)("shrink-0 bg-border","horizontal"===i?"h-[1px] w-full":"h-full w-[1px]",r),...c})});l.displayName=s.b.displayName},34301:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(40157).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},47262:(e,a,r)=>{"use strict";r.d(a,{S:()=>c});var t=r(95155),i=r(12115),s=r(76981),n=r(10518),l=r(59434);let c=i.forwardRef((e,a)=>{let{className:r,...i}=e;return(0,t.jsx)(s.bL,{ref:a,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...i,children:(0,t.jsx)(s.C1,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})})});c.displayName=s.bL.displayName},49889:(e,a,r)=>{"use strict";r.d(a,{Z:()=>i});var t=r(34477);let i=(0,t.createServerReference)("7fca14dea33f34172350377b470effec9c0121e7e0",t.callServer,void 0,t.findSourceMapURL,"getAllBatchesFS")},51894:(e,a,r)=>{"use strict";r.d(a,{i:()=>i});var t=r(34477);let i=(0,t.createServerReference)("7fd3d942ca70288c21ef393a7f2e89fd470d66a73e",t.callServer,void 0,t.findSourceMapURL,"addAccountFS")},57082:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(40157).A)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},59409:(e,a,r)=>{"use strict";r.d(a,{bq:()=>x,eb:()=>v,gC:()=>j,l6:()=>d,s3:()=>u,yv:()=>m});var t=r(95155),i=r(12115),s=r(31992),n=r(79556),l=r(77381),c=r(10518),o=r(59434);let d=s.bL,u=s.YJ,m=s.WT,x=i.forwardRef((e,a)=>{let{className:r,children:i,...l}=e;return(0,t.jsxs)(s.l9,{ref:a,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...l,children:[i,(0,t.jsx)(s.In,{asChild:!0,children:(0,t.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});x.displayName=s.l9.displayName;let p=i.forwardRef((e,a)=>{let{className:r,...i}=e;return(0,t.jsx)(s.PP,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",r),...i,children:(0,t.jsx)(l.A,{className:"h-4 w-4"})})});p.displayName=s.PP.displayName;let h=i.forwardRef((e,a)=>{let{className:r,...i}=e;return(0,t.jsx)(s.wn,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",r),...i,children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})});h.displayName=s.wn.displayName;let j=i.forwardRef((e,a)=>{let{className:r,children:i,position:n="popper",...l}=e;return(0,t.jsx)(s.ZL,{children:(0,t.jsxs)(s.UC,{ref:a,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:n,...l,children:[(0,t.jsx)(p,{}),(0,t.jsx)(s.LM,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),(0,t.jsx)(h,{})]})})});j.displayName=s.UC.displayName,i.forwardRef((e,a)=>{let{className:r,...i}=e;return(0,t.jsx)(s.JU,{ref:a,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...i})}).displayName=s.JU.displayName;let v=i.forwardRef((e,a)=>{let{className:r,children:i,...n}=e;return(0,t.jsxs)(s.q7,{ref:a,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...n,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(s.VF,{children:(0,t.jsx)(c.A,{className:"h-4 w-4"})})}),(0,t.jsx)(s.p4,{children:i})]})});v.displayName=s.q7.displayName,i.forwardRef((e,a)=>{let{className:r,...i}=e;return(0,t.jsx)(s.wv,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",r),...i})}).displayName=s.wv.displayName},61930:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});var t=r(95155),i=r(12115);let s=e=>{let{value:a,options:r,locale:s="en-US",placeholder:n="N/D"}=e,[l,c]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{c(!0)},[]),"number"!=typeof a||isNaN(a))return(0,t.jsx)(t.Fragment,{children:n});if(!l){let e=2*(a%1!=0);return(0,t.jsx)(t.Fragment,{children:a.toFixed(e)})}return(0,t.jsx)(t.Fragment,{children:a.toLocaleString(s,r)})}},62523:(e,a,r)=>{"use strict";r.d(a,{p:()=>n});var t=r(95155),i=r(12115),s=r(59434);let n=i.forwardRef((e,a)=>{let{className:r,type:i,...n}=e;return(0,t.jsx)("input",{type:i,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:a,...n})});n.displayName="Input"},65331:(e,a,r)=>{"use strict";r.d(a,{U:()=>i});var t=r(34477);let i=(0,t.createServerReference)("7f35257657c6cb675baa01fb80d95af2d5143c9413",t.callServer,void 0,t.findSourceMapURL,"getAccountsFS")},76981:(e,a,r)=>{"use strict";r.d(a,{C1:()=>N,bL:()=>y});var t=r(12115),i=r(6101),s=r(46081),n=r(85185),l=r(5845),c=r(45503),o=r(11275),d=r(28905),u=r(63655),m=r(95155),x="Checkbox",[p,h]=(0,s.A)(x),[j,v]=p(x);function f(e){let{__scopeCheckbox:a,checked:r,children:i,defaultChecked:s,disabled:n,form:c,name:o,onCheckedChange:d,required:u,value:p="on",internal_do_not_use_render:h}=e,[v,f]=(0,l.i)({prop:r,defaultProp:null!=s&&s,onChange:d,caller:x}),[g,b]=t.useState(null),[y,C]=t.useState(null),N=t.useRef(!1),w=!g||!!c||!!g.closest("form"),F={checked:v,disabled:n,setChecked:f,control:g,setControl:b,name:o,form:c,value:p,hasConsumerStoppedPropagationRef:N,required:u,defaultChecked:!E(s)&&s,isFormControl:w,bubbleInput:y,setBubbleInput:C};return(0,m.jsx)(j,{scope:a,...F,children:"function"==typeof h?h(F):i})}var g="CheckboxTrigger",b=t.forwardRef((e,a)=>{let{__scopeCheckbox:r,onKeyDown:s,onClick:l,...c}=e,{control:o,value:d,disabled:x,checked:p,required:h,setControl:j,setChecked:f,hasConsumerStoppedPropagationRef:b,isFormControl:y,bubbleInput:C}=v(g,r),N=(0,i.s)(a,j),w=t.useRef(p);return t.useEffect(()=>{let e=null==o?void 0:o.form;if(e){let a=()=>f(w.current);return e.addEventListener("reset",a),()=>e.removeEventListener("reset",a)}},[o,f]),(0,m.jsx)(u.sG.button,{type:"button",role:"checkbox","aria-checked":E(p)?"mixed":p,"aria-required":h,"data-state":_(p),"data-disabled":x?"":void 0,disabled:x,value:d,...c,ref:N,onKeyDown:(0,n.m)(s,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,n.m)(l,e=>{f(e=>!!E(e)||!e),C&&y&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})})});b.displayName=g;var y=t.forwardRef((e,a)=>{let{__scopeCheckbox:r,name:t,checked:i,defaultChecked:s,required:n,disabled:l,value:c,onCheckedChange:o,form:d,...u}=e;return(0,m.jsx)(f,{__scopeCheckbox:r,checked:i,defaultChecked:s,disabled:l,required:n,onCheckedChange:o,name:t,form:d,value:c,internal_do_not_use_render:e=>{let{isFormControl:t}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(b,{...u,ref:a,__scopeCheckbox:r}),t&&(0,m.jsx)(F,{__scopeCheckbox:r})]})}})});y.displayName=x;var C="CheckboxIndicator",N=t.forwardRef((e,a)=>{let{__scopeCheckbox:r,forceMount:t,...i}=e,s=v(C,r);return(0,m.jsx)(d.C,{present:t||E(s.checked)||!0===s.checked,children:(0,m.jsx)(u.sG.span,{"data-state":_(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:a,style:{pointerEvents:"none",...e.style}})})});N.displayName=C;var w="CheckboxBubbleInput",F=t.forwardRef((e,a)=>{let{__scopeCheckbox:r,...s}=e,{control:n,hasConsumerStoppedPropagationRef:l,checked:d,defaultChecked:x,required:p,disabled:h,name:j,value:f,form:g,bubbleInput:b,setBubbleInput:y}=v(w,r),C=(0,i.s)(a,y),N=(0,c.Z)(d),F=(0,o.X)(n);t.useEffect(()=>{if(!b)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,a=!l.current;if(N!==d&&e){let r=new Event("click",{bubbles:a});b.indeterminate=E(d),e.call(b,!E(d)&&d),b.dispatchEvent(r)}},[b,N,d,l]);let _=t.useRef(!E(d)&&d);return(0,m.jsx)(u.sG.input,{type:"checkbox","aria-hidden":!0,defaultChecked:null!=x?x:_.current,required:p,disabled:h,name:j,value:f,form:g,...s,tabIndex:-1,ref:C,style:{...s.style,...F,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function E(e){return"indeterminate"===e}function _(e){return E(e)?"indeterminate":e?"checked":"unchecked"}F.displayName=w},77223:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(40157).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},93473:(e,a,r)=>{"use strict";r.d(a,{Cv:()=>c,F3:()=>i,HF:()=>o,IJ:()=>h,Ly:()=>x,Op:()=>j,Oq:()=>s,QM:()=>l,QZ:()=>p,RP:()=>d,X$:()=>n,Yl:()=>u,g0:()=>v,gN:()=>t,iD:()=>b,l:()=>m,tF:()=>f,tU:()=>g}),["Sello Copil","Grupo Tragaluz","MARRIOT","AC HOTELES","Bokaxankla Bar","Florida Park","Restaurante Bajio","Restaurante Trompo","NH HOTELES","Casa de Mexico","Grupo Dejate Llevar","Chiton","Martina por el Norte","Boheme","4 Latas","Vineci Hoteles","Catering Ciboulette","Los pefiotes","Restaurante Fondeo","Morris Club","Floren Domezain","Taberna Jimmys","Casa Ortega","Cafe de Paris","CRISTINA ORIA","Salvador Bachiller","Restaurante Lanteo","Fuerte Group Hotels","Noname","Bar Nuevo M40","Tienda El enemigo","Discoteca Maracaibo","La Oficina Maracaibo","Liquor shop","Casa de Siempre","Filemon","La Rubia","Restaurante Meneo","Ke Sotogrande","Polo Sotogrande","Agora Sotogrande","Nueva Taberna","Restaurante Aurea","Chambao","Gkg Sky Bar","ella Sky Bar","Botania","Dofia Tomasa","Mantequerias Bravo","Catering Samantha","Grupo Mentidero","Catering Laurel","Cristine Bedfor","Estrella Galicia","Tierra del Queiles","Restaurante Her","Noneta","Makila","Golda","Vinoteca Collado","Petit Apetit"].map(e=>({nombre:e,type:"HORECA",potencial:"medio"}));let t=[],i=["Libre","Ocupado","Limpieza"],s=["unit","kg","g","l","ml"],n=["Programada","Pendiente","Confirmado","Procesando","Enviado","Entregado","Facturado","Cancelado","Fallido","Seguimiento","Completado"],l=["Distribuidor","HORECA","Retail","Cliente Final","Otro"],c=["Llamar al responsable de compras","Mandar informaci\xf3n","Visitar de nuevo","Enviar muestra","Esperar decisi\xf3n","Opci\xf3n personalizada"],o=["No interesado","Ya trabaja con otro proveedor","Sin presupuesto","Producto no encaja","Otro (especificar)"],d=["Admin","SalesRep","Distributor","Clavadista","L\xedder Clavadista"],u=["HORECA","Distribuidor","Retail Minorista","Gran Superficie","Evento Especial","Cliente Final Directo","Importador","Otro","distribuidor_mediano","distribuidor_grande","distribuidor_top"],m=["Activaci\xf3n en Tienda","Feria Comercial","Evento Corporativo","Degustaci\xf3n","Patrocinio","Activaci\xf3n","Otro"],x=["Planificado","Confirmado","En Curso","Completado","Cancelado","Pospuesto"],p=["Equipo Santa Brisa","Iniciativa Importador","Marketing Digital","Referido","Otro"],h=["Adelantado","Contado","Transferencia 30 d\xedas","Giro Bancario"],j=["Pendiente","Aprobada","Rechazada","Enviada"],v=["Captaci\xf3n Cliente Nuevo","Seguimiento Cliente Existente","Material para Evento","Uso Interno/Formaci\xf3n","Otro"],f=["\xc1lava","Albacete","Alicante","Almer\xeda","Asturias","\xc1vila","Badajoz","Barcelona","Burgos","C\xe1ceres","C\xe1diz","Cantabria","Castell\xf3n","Ciudad Real","C\xf3rdoba","La Coru\xf1a","Cuenca","Gerona","Granada","Guadalajara","Guip\xfazcoa","Huelva","Huesca","Islas Baleares","Ja\xe9n","Le\xf3n","L\xe9rida","Lugo","Madrid","M\xe1laga","Murcia","Navarra","Orense","Palencia","Las Palmas","Pontevedra","La Rioja","Salamanca","Santa Cruz de Tenerife","Segovia","Sevilla","Soria","Tarragona","Teruel","Toledo","Valencia","Valladolid","Vizcaya","Zamora","Zaragoza"],g=["Borrador","Confirmada","Facturada","Pagada","Cancelada"],b=["Importador","Online","Estrat\xe9gica","Otro"]}},e=>{var a=a=>e(e.s=a);e.O(0,[2992,7138,5769,8884,1915,1490,587,7328,8965,1859,3229,6315,8441,1684,7358],()=>a(3030)),_N_E=e.O()}]);