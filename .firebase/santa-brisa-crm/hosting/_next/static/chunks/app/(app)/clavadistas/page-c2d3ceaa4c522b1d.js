(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[999],{45189:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>A});var t=s(95155),l=s(12115),r=s(35695),d=s(66695),i=s(91394),n=s(85127),c=s(50172),o=s(91467),m=s(17607),u=s(88390),x=s(57082),h=s(61930),f=s(6874),j=s.n(f),p=s(30285),N=s(79557),v=s(16021),w=s(65331),b=s(87481),y=s(51055),g=s(91950);function A(){let{toast:e}=(0,b.dj)(),{userRole:a,teamMember:s,loading:f}=(0,y.A)(),[A,C]=(0,l.useState)([]),[R,E]=(0,l.useState)(!0);!f&&"Clavadista"===a&&(null==s?void 0:s.id)&&(0,r.redirect)("/clavadistas/".concat(s.id)),(0,l.useEffect)(()=>{if("Clavadista"===a)return void E(!1);!async function(){E(!0);try{let[e,a,s]=await Promise.all([(0,N.r)(),(0,v.I)(["Clavadista","L\xedder Clavadista"]),(0,w.U)()]),t=a.filter(e=>"Clavadista"===e.role||"L\xedder Clavadista"===e.role).map(a=>{let t=e.filter(e=>e.clavadistaId===a.id&&g.s.includes(e.status)).reduce((e,a)=>e+(a.value||0),0),l=new Set;return s.forEach(e=>{e.embajadorId===a.id&&l.add(e.id)}),{...a,totalValueParticipated:t,newAccountsOpened:l.size}});C(t)}catch(a){console.error("Error loading clavadista stats:",a),e({title:"Error al Cargar Datos",description:"No se pudieron cargar las estad\xedsticas de los clavadistas.",variant:"destructive"})}finally{E(!1)}}()},[e,a]);let T=(0,l.useMemo)(()=>A.reduce((e,a)=>e+a.totalValueParticipated,0),[A]),B=(0,l.useMemo)(()=>A.reduce((e,a)=>e+a.newAccountsOpened,0),[A]);return R||f||"Clavadista"===a?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-8",children:[(0,t.jsx)(c.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,t.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Cargando datos de clavadistas..."})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("header",{className:"flex items-center space-x-2",children:[(0,t.jsx)(o.A,{className:"h-8 w-8 text-primary"}),(0,t.jsx)("h1",{className:"text-3xl font-headline font-semibold",children:"Panel de Clavadistas (Brand Ambassadors)"})]}),(0,t.jsxs)(d.Zp,{className:"shadow-subtle hover:shadow-md transition-shadow duration-300",children:[(0,t.jsxs)(d.aR,{children:[(0,t.jsx)(d.ZB,{children:"Rendimiento de Clavadistas"}),(0,t.jsx)(d.BT,{children:"Visualiza la facturaci\xf3n y cuentas nuevas generadas por los Clavadistas."})]}),(0,t.jsx)(d.Wu,{children:(0,t.jsxs)(n.XI,{children:[(0,t.jsx)(n.A0,{children:(0,t.jsxs)(n.Hj,{children:[(0,t.jsx)(n.nd,{className:"w-[30%]",children:"Clavadista"}),(0,t.jsx)(n.nd,{className:"text-right w-[25%]",children:"Facturaci\xf3n Total Generada"}),(0,t.jsx)(n.nd,{className:"text-right w-[25%]",children:"Cuentas Nuevas Abiertas"}),(0,t.jsx)(n.nd,{className:"text-right w-[20%]",children:"Acciones"})]})}),(0,t.jsx)(n.BF,{children:A.length>0?A.map(e=>(0,t.jsxs)(n.Hj,{children:[(0,t.jsx)(n.nA,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)(i.eu,{children:[(0,t.jsx)(i.BK,{src:e.avatarUrl||"https://placehold.co/40x40.png?text=".concat(e.name.split(" ").map(e=>e[0]).join("")),alt:e.name,"data-ai-hint":"person portrait"}),(0,t.jsx)(i.q5,{children:e.name.split(" ").map(e=>e[0]).join("")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(j(),{href:"/clavadistas/".concat(e.id),className:"font-medium hover:underline text-primary",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.role})]})]})}),(0,t.jsx)(n.nA,{className:"text-right font-medium",children:(0,t.jsx)(h.A,{value:e.totalValueParticipated,locale:"es-ES",options:{style:"currency",currency:"EUR"}})}),(0,t.jsx)(n.nA,{className:"text-right font-medium",children:(0,t.jsx)(h.A,{value:e.newAccountsOpened,locale:"es-ES"})}),(0,t.jsx)(n.nA,{className:"text-right",children:(0,t.jsx)(p.$,{variant:"outline",size:"sm",asChild:!0,children:(0,t.jsxs)(j(),{href:"/clavadistas/".concat(e.id),children:[(0,t.jsx)(m.A,{className:"mr-1 h-3 w-3"})," Ver Perfil"]})})})]},e.id)):(0,t.jsx)(n.Hj,{children:(0,t.jsx)(n.nA,{colSpan:4,className:"h-24 text-center",children:"No hay Clavadistas configurados o no se encontraron datos de participaci\xf3n."})})})]})})]}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)(d.Zp,{className:"shadow-subtle hover:shadow-md transition-shadow duration-300",children:[(0,t.jsxs)(d.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(d.ZB,{className:"text-sm font-medium",children:"Facturaci\xf3n Total del Equipo Clavadista"}),(0,t.jsx)(u.A,{className:"h-5 w-5 text-muted-foreground"})]}),(0,t.jsxs)(d.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:(0,t.jsx)(h.A,{value:T,locale:"es-ES",options:{style:"currency",currency:"EUR"}})}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Suma del valor de pedidos donde participaron clavadistas."})]})]}),(0,t.jsxs)(d.Zp,{className:"shadow-subtle hover:shadow-md transition-shadow duration-300",children:[(0,t.jsxs)(d.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(d.ZB,{className:"text-sm font-medium",children:"Total Cuentas Abiertas por Clavadistas"}),(0,t.jsx)(x.A,{className:"h-5 w-5 text-muted-foreground"})]}),(0,t.jsxs)(d.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:(0,t.jsx)(h.A,{value:B,locale:"es-ES"})}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Suma de todas las cuentas nuevas generadas por clavadistas."})]})]})]})]})}},47976:(e,a,s)=>{Promise.resolve().then(s.bind(s,45189))},85127:(e,a,s)=>{"use strict";s.d(a,{A0:()=>i,BF:()=>n,Hj:()=>c,XI:()=>d,nA:()=>m,nd:()=>o});var t=s(95155),l=s(12115),r=s(59434);let d=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:a,className:(0,r.cn)("w-full caption-bottom text-sm",s),...l})})});d.displayName="Table";let i=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("thead",{ref:a,className:(0,r.cn)("[&_tr]:border-b",s),...l})});i.displayName="TableHeader";let n=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("tbody",{ref:a,className:(0,r.cn)("[&_tr:last-child]:border-0",s),...l})});n.displayName="TableBody",l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("tfoot",{ref:a,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...l})}).displayName="TableFooter";let c=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("tr",{ref:a,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...l})});c.displayName="TableRow";let o=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("th",{ref:a,className:(0,r.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...l})});o.displayName="TableHead";let m=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("td",{ref:a,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...l})});m.displayName="TableCell",l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("caption",{ref:a,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",s),...l})}).displayName="TableCaption"},91394:(e,a,s)=>{"use strict";s.d(a,{BK:()=>n,eu:()=>i,q5:()=>c});var t=s(95155),l=s(12115),r=s(54011),d=s(59434);let i=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.bL,{ref:a,className:(0,d.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...l})});i.displayName=r.bL.displayName;let n=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r._V,{ref:a,className:(0,d.cn)("aspect-square h-full w-full",s),...l})});n.displayName=r._V.displayName;let c=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.H4,{ref:a,className:(0,d.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...l})});c.displayName=r.H4.displayName}},e=>{var a=a=>e(e.s=a);e.O(0,[2992,7138,5769,8884,6874,2783,9827,8441,1684,7358],()=>a(47976)),_N_E=e.O()}]);