(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6537],{31238:(e,a,r)=>{Promise.resolve().then(r.bind(r,81994))},81994:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>T});var n=r(95155),t=r(12115),i=r(30285),l=r(66695),s=r(85127),o=r(87481),c=r(87057),d=r(34301),u=r(50172),h=r(3561),x=r(18763),m=r(45349),j=r(34477);let p=(0,j.createServerReference)("7f2909230e345163eca178c6e5c9cb90c7a2ad75b6",j.callServer,void 0,j.findSourceMapURL,"updateTankFS"),v=(0,j.createServerReference)("7fb9b1319e1d29e3d91637557eadf4f669fbc6f9ee",j.callServer,void 0,j.findSourceMapURL,"addTankFS");var C=r(96656),g=r(61930),b=r(51055),f=r(90221),N=r(62177),A=r(68663),y=r(54165),E=r(17759),S=r(62523),L=r(93473),M=r(59409),B=r(22346);let R=A.Ik({name:A.Yj().min(2,"El nombre del tanque es obligatorio."),capacity:A.au.number().positive("La capacidad debe ser un n\xfamero positivo."),location:A.Yj().min(2,"La ubicaci\xf3n es obligatoria."),status:A.k5(L.F3),currentBatchId:A.Yj().optional().nullable(),currentQuantity:A.au.number().nonnegative("La cantidad no puede ser negativa.").optional().nullable(),currentUom:A.k5(L.Oq).optional().nullable()});function I(e){let{isOpen:a,onOpenChange:r,onSave:l,tank:s}=e,[o,c]=t.useState(!1),d=!!s,h=(0,N.mN)({resolver:(0,f.u)(R),defaultValues:{name:"",capacity:1e3,location:"",status:"Libre",currentBatchId:null,currentQuantity:null,currentUom:null}});t.useEffect(()=>{a&&(d?h.reset({name:s.name,capacity:s.capacity,location:s.location,status:s.status,currentBatchId:s.currentBatchId||null,currentQuantity:s.currentQuantity||null,currentUom:s.currentUom||null}):h.reset({name:"",capacity:1e3,location:"Zona de Mezcla",status:"Libre",currentBatchId:null,currentQuantity:null,currentUom:null}))},[a,s,d,h]);let x=async e=>{c(!0),await l(e,null==s?void 0:s.id),c(!1)};return(0,n.jsx)(y.lG,{open:a,onOpenChange:r,children:(0,n.jsxs)(y.Cf,{className:"sm:max-w-md",children:[(0,n.jsxs)(y.c7,{children:[(0,n.jsx)(y.L3,{children:d?"Editar Tanque":"A\xf1adir Nuevo Tanque"}),(0,n.jsx)(y.rr,{children:d?"Modifica los detalles del tanque ".concat(s.name,"."):"Introduce los detalles del nuevo tanque de producci\xf3n."})]}),(0,n.jsx)(E.lV,{...h,children:(0,n.jsxs)("form",{onSubmit:h.handleSubmit(x),className:"space-y-4 py-2",children:[(0,n.jsx)(E.zB,{control:h.control,name:"name",render:e=>{let{field:a}=e;return(0,n.jsxs)(E.eI,{children:[(0,n.jsx)(E.lR,{children:"Nombre del Tanque"}),(0,n.jsx)(E.MJ,{children:(0,n.jsx)(S.p,{placeholder:"Ej: Tanque de Mezcla 3",...a})}),(0,n.jsx)(E.C5,{})]})}}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsx)(E.zB,{control:h.control,name:"capacity",render:e=>{let{field:a}=e;return(0,n.jsxs)(E.eI,{children:[(0,n.jsx)(E.lR,{children:"Capacidad (L)"}),(0,n.jsx)(E.MJ,{children:(0,n.jsx)(S.p,{type:"number",placeholder:"Ej: 1000",...a})}),(0,n.jsx)(E.C5,{})]})}}),(0,n.jsx)(E.zB,{control:h.control,name:"location",render:e=>{let{field:a}=e;return(0,n.jsxs)(E.eI,{children:[(0,n.jsx)(E.lR,{children:"Ubicaci\xf3n"}),(0,n.jsx)(E.MJ,{children:(0,n.jsx)(S.p,{placeholder:"Ej: Zona de Mezcla",...a})}),(0,n.jsx)(E.C5,{})]})}})]}),d&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(B.w,{}),(0,n.jsx)("h3",{className:"font-semibold text-muted-foreground pt-2 text-sm",children:"Estado Manual"}),(0,n.jsx)(E.zB,{control:h.control,name:"status",render:e=>{let{field:a}=e;return(0,n.jsxs)(E.eI,{children:[(0,n.jsx)(E.lR,{children:"Estado"}),(0,n.jsxs)(M.l6,{onValueChange:a.onChange,value:a.value,children:[(0,n.jsx)(E.MJ,{children:(0,n.jsx)(M.bq,{children:(0,n.jsx)(M.yv,{})})}),(0,n.jsx)(M.gC,{children:L.F3.map(e=>(0,n.jsx)(M.eb,{value:e,children:e},e))})]}),(0,n.jsx)(E.C5,{})]})}}),(0,n.jsx)(E.zB,{control:h.control,name:"currentBatchId",render:e=>{var a;let{field:r}=e;return(0,n.jsxs)(E.eI,{children:[(0,n.jsx)(E.lR,{children:"Lote Actual (Opcional)"}),(0,n.jsx)(E.MJ,{children:(0,n.jsx)(S.p,{placeholder:"ID del lote",...r,value:null!=(a=r.value)?a:""})}),(0,n.jsx)(E.C5,{})]})}}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsx)(E.zB,{control:h.control,name:"currentQuantity",render:e=>{var a;let{field:r}=e;return(0,n.jsxs)(E.eI,{children:[(0,n.jsx)(E.lR,{children:"Cantidad Actual (L)"}),(0,n.jsx)(E.MJ,{children:(0,n.jsx)(S.p,{type:"number",step:"any",...r,value:null!=(a=r.value)?a:""})}),(0,n.jsx)(E.C5,{})]})}}),(0,n.jsx)(E.zB,{control:h.control,name:"currentUom",render:e=>{var a;let{field:r}=e;return(0,n.jsxs)(E.eI,{children:[(0,n.jsx)(E.lR,{children:"UoM"}),(0,n.jsxs)(M.l6,{onValueChange:r.onChange,value:null!=(a=r.value)?a:void 0,children:[(0,n.jsx)(E.MJ,{children:(0,n.jsx)(M.bq,{children:(0,n.jsx)(M.yv,{placeholder:"Unidad"})})}),(0,n.jsx)(M.gC,{children:L.Oq.map(e=>(0,n.jsx)(M.eb,{value:e,children:e},e))})]}),(0,n.jsx)(E.C5,{})]})}})]})]}),(0,n.jsxs)(y.Es,{className:"pt-4",children:[(0,n.jsx)(y.HM,{asChild:!0,children:(0,n.jsx)(i.$,{type:"button",variant:"outline",disabled:o,children:"Cancelar"})}),(0,n.jsx)(i.$,{type:"submit",disabled:o,children:o?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardando..."]}):d?"Guardar Cambios":"Crear Tanque"})]})]})})]})})}var O=r(44838);function T(){let{toast:e}=(0,o.dj)(),{dataSignature:a,refreshDataSignature:r}=(0,b.A)(),[j,f]=t.useState([]),[N,A]=t.useState(!0),[y,E]=t.useState(!1),[S,L]=t.useState(null);t.useEffect(()=>{(async()=>{A(!0);try{let e=await (0,m.Z)();f(e)}catch(a){console.error("Error fetching tanks:",a),e({title:"Error al Cargar Datos",description:"No se pudieron cargar los tanques.",variant:"destructive"})}finally{A(!1)}})()},[e,a]);let M=e=>{L(e),E(!0)},B=async(a,n)=>{try{n?(await p(n,a),e({title:"\xa1Tanque Actualizado!",description:'El tanque "'.concat(a.name,'" ha sido actualizado.')})):(await v(a),e({title:"\xa1Tanque Creado!",description:'El tanque "'.concat(a.name,'" ha sido a\xf1adido.')})),r(),E(!1)}catch(a){e({title:"Error al Guardar",description:a.message,variant:"destructive"})}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsxs)("header",{className:"flex items-center justify-between gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(c.A,{className:"h-8 w-8 text-primary"}),(0,n.jsx)("h1",{className:"text-3xl font-headline font-semibold",children:"Gesti\xf3n de Tanques"})]}),(0,n.jsxs)(i.$,{onClick:()=>{L(null),E(!0)},children:[(0,n.jsx)(d.A,{className:"mr-2 h-4 w-4"})," Nuevo Tanque"]})]}),(0,n.jsxs)(l.Zp,{children:[(0,n.jsxs)(l.aR,{children:[(0,n.jsx)(l.ZB,{children:"Listado de Tanques de Mezcla"}),(0,n.jsx)(l.BT,{children:"Visualiza el estado y la disponibilidad de los tanques de producci\xf3n."})]}),(0,n.jsx)(l.Wu,{children:N?(0,n.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,n.jsx)(u.A,{className:"h-12 w-12 animate-spin text-primary"})}):(0,n.jsxs)(s.XI,{children:[(0,n.jsx)(s.A0,{children:(0,n.jsxs)(s.Hj,{children:[(0,n.jsx)(s.nd,{children:"Nombre / ID"}),(0,n.jsx)(s.nd,{children:"Ubicaci\xf3n"}),(0,n.jsx)(s.nd,{className:"text-right",children:"Capacidad (L)"}),(0,n.jsx)(s.nd,{className:"text-right",children:"Cantidad Actual (L)"}),(0,n.jsx)(s.nd,{children:"Lote Actual"}),(0,n.jsx)(s.nd,{children:"Estado"}),(0,n.jsx)(s.nd,{className:"text-right",children:"Acciones"})]})}),(0,n.jsx)(s.BF,{children:j.length>0?j.map(e=>(0,n.jsxs)(s.Hj,{children:[(0,n.jsx)(s.nA,{className:"font-medium",children:e.name}),(0,n.jsx)(s.nA,{children:e.location}),(0,n.jsx)(s.nA,{className:"text-right",children:(0,n.jsx)(g.A,{value:e.capacity})}),(0,n.jsx)(s.nA,{className:"text-right font-semibold",children:"Ocupado"===e.status&&e.currentQuantity?(0,n.jsx)(g.A,{value:e.currentQuantity}):"â€”"}),(0,n.jsx)(s.nA,{className:"font-mono text-xs",children:e.currentBatchId||"N/A"}),(0,n.jsx)(s.nA,{children:(0,n.jsx)(C.A,{type:"tank",status:e.status})}),(0,n.jsx)(s.nA,{className:"text-right",children:(0,n.jsxs)(O.rI,{children:[(0,n.jsx)(O.ty,{asChild:!0,children:(0,n.jsx)(i.$,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,n.jsx)(h.A,{className:"h-4 w-4"})})}),(0,n.jsx)(O.SQ,{children:(0,n.jsxs)(O._2,{onSelect:()=>M(e),children:[(0,n.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Editar"]})})]})})]},e.id)):(0,n.jsx)(s.Hj,{children:(0,n.jsx)(s.nA,{colSpan:7,className:"text-center h-24",children:"No hay tanques registrados en el sistema."})})})]})})]})]}),(0,n.jsx)(I,{tank:S,isOpen:y,onOpenChange:E,onSave:B})]})}},93473:(e,a,r)=>{"use strict";r.d(a,{Cv:()=>o,F3:()=>t,HF:()=>c,IJ:()=>j,Ly:()=>x,Op:()=>p,Oq:()=>i,QM:()=>s,QZ:()=>m,RP:()=>d,X$:()=>l,Yl:()=>u,g0:()=>v,gN:()=>n,iD:()=>b,l:()=>h,tF:()=>C,tU:()=>g}),["Sello Copil","Grupo Tragaluz","MARRIOT","AC HOTELES","Bokaxankla Bar","Florida Park","Restaurante Bajio","Restaurante Trompo","NH HOTELES","Casa de Mexico","Grupo Dejate Llevar","Chiton","Martina por el Norte","Boheme","4 Latas","Vineci Hoteles","Catering Ciboulette","Los pefiotes","Restaurante Fondeo","Morris Club","Floren Domezain","Taberna Jimmys","Casa Ortega","Cafe de Paris","CRISTINA ORIA","Salvador Bachiller","Restaurante Lanteo","Fuerte Group Hotels","Noname","Bar Nuevo M40","Tienda El enemigo","Discoteca Maracaibo","La Oficina Maracaibo","Liquor shop","Casa de Siempre","Filemon","La Rubia","Restaurante Meneo","Ke Sotogrande","Polo Sotogrande","Agora Sotogrande","Nueva Taberna","Restaurante Aurea","Chambao","Gkg Sky Bar","ella Sky Bar","Botania","Dofia Tomasa","Mantequerias Bravo","Catering Samantha","Grupo Mentidero","Catering Laurel","Cristine Bedfor","Estrella Galicia","Tierra del Queiles","Restaurante Her","Noneta","Makila","Golda","Vinoteca Collado","Petit Apetit"].map(e=>({nombre:e,type:"HORECA",potencial:"medio"}));let n=[],t=["Libre","Ocupado","Limpieza"],i=["unit","kg","g","l","ml"],l=["Programada","Pendiente","Confirmado","Procesando","Enviado","Entregado","Facturado","Cancelado","Fallido","Seguimiento","Completado"],s=["Distribuidor","HORECA","Retail","Cliente Final","Otro"],o=["Llamar al responsable de compras","Mandar informaci\xf3n","Visitar de nuevo","Enviar muestra","Esperar decisi\xf3n","Opci\xf3n personalizada"],c=["No interesado","Ya trabaja con otro proveedor","Sin presupuesto","Producto no encaja","Otro (especificar)"],d=["Admin","SalesRep","Distributor","Clavadista","L\xedder Clavadista"],u=["HORECA","Distribuidor","Retail Minorista","Gran Superficie","Evento Especial","Cliente Final Directo","Importador","Otro","distribuidor_mediano","distribuidor_grande","distribuidor_top"],h=["Activaci\xf3n en Tienda","Feria Comercial","Evento Corporativo","Degustaci\xf3n","Patrocinio","Activaci\xf3n","Otro"],x=["Planificado","Confirmado","En Curso","Completado","Cancelado","Pospuesto"],m=["Equipo Santa Brisa","Iniciativa Importador","Marketing Digital","Referido","Otro"],j=["Adelantado","Contado","Transferencia 30 d\xedas","Giro Bancario"],p=["Pendiente","Aprobada","Rechazada","Enviada"],v=["Captaci\xf3n Cliente Nuevo","Seguimiento Cliente Existente","Material para Evento","Uso Interno/Formaci\xf3n","Otro"],C=["\xc1lava","Albacete","Alicante","Almer\xeda","Asturias","\xc1vila","Badajoz","Barcelona","Burgos","C\xe1ceres","C\xe1diz","Cantabria","Castell\xf3n","Ciudad Real","C\xf3rdoba","La Coru\xf1a","Cuenca","Gerona","Granada","Guadalajara","Guip\xfazcoa","Huelva","Huesca","Islas Baleares","Ja\xe9n","Le\xf3n","L\xe9rida","Lugo","Madrid","M\xe1laga","Murcia","Navarra","Orense","Palencia","Las Palmas","Pontevedra","La Rioja","Salamanca","Santa Cruz de Tenerife","Segovia","Sevilla","Soria","Tarragona","Teruel","Toledo","Valencia","Valladolid","Vizcaya","Zamora","Zaragoza"],g=["Borrador","Confirmada","Facturada","Pagada","Cancelada"],b=["Importador","Online","Estrat\xe9gica","Otro"]}},e=>{var a=a=>e(e.s=a);e.O(0,[2992,7138,5769,8884,1915,1490,587,7328,8965,1859,8782,1479,6315,9887,8441,1684,7358],()=>a(31238)),_N_E=e.O()}]);